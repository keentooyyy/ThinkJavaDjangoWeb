{% load static %}
<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Student Rankings - Print</title>
    <meta name="viewport" content="width=device-width, initial-scale=1">

    <!-- ✅ Only Bootstrap CSS + icons -->
    <link href="{% static 'css/bootstrap.min.css' %}" rel="stylesheet">
    <link rel="stylesheet" href="{% static 'plugins/bootstrap-icons/bootstrap-icons.min.css' %}">

    <style>
        @page {
            size: A4 landscape; /* portrait if you prefer */
            margin: 15mm;
            @bottom-center {
                content: "Generated by ThinkJava • Page " counter(page) " of " counter(pages);
                font-size: 10px;
                color: #555;
            }
            @top-center {
                content: "ThinkJava Student Rankings Report";
                font-size: 12px;
                font-weight: bold;
            }
        }


    </style>
</head>
<body>

<div class="container-fluid mt-4">
    <div class="print-header">
        <h4 class="mt-2 text-center">Student Performance Ranking</h4>
        <p class="text-center">{{ selected_department|default:"All Departments" }}
            - {{ selected_section|default:"All Sections" }}</p>
    </div>

    <table class="table table-bordered table-sm text-center">
        <thead>
        <tr>
            <th>Student ID</th>
            <th>First Name</th>
            <th>Last Name</th>
            <th>Department & Section</th>
            <th>Time Remaining</th>
            <th>Achievements</th>
            <th>Score</th>
        </tr>
        </thead>
        <tbody>
        {% for student in rankings %}
            <tr>
                <td>{{ student.student_id }}</td>
                <td>{{ student.first_name }}</td>
                <td>{{ student.last_name }}</td>
                <td>{{ student.section }}</td>
                <td>{{ student.total_time_remaining }}</td>
                <td>{{ student.achievements_unlocked }}</td>
                <td>{{ student.score }}</td>
            </tr>
        {% empty %}
            <tr>
                <td colspan="7" class="text-center">No student data available.</td>
            </tr>
        {% endfor %}
        </tbody>
    </table>

</div>

<!-- ✅ Only Bootstrap JS (for table responsiveness if needed) -->
<script src="{% static 'js/bootstrap.bundle.min.js' %}"></script>

<script>
    window.addEventListener("load", function () {
        setTimeout(function () {
            window.print();
            window.onafterprint = function () {
                window.close();
            };
        }, 500); // wait a bit to make sure everything renders
    });
</script>
</body>
</html>
